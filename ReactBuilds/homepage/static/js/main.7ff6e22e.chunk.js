/*! For license information please see main.7ff6e22e.chunk.js.LICENSE.txt */
(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{75:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),s=n.n(c),r=n(17),o=n.n(r),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))},i=n(18),u=n.n(i),d=n(31),j=n(8),p=n(23),b=n.n(p),g=(n(75),n(22)),h=n(33),O=n(42),m=n(39),f=n(12);function x(e){return Object(a.jsxs)(O.a,{variant:"dark",id:"navbar",children:[Object(a.jsx)(O.a.Brand,{href:"#home",children:"Swipe"}),Object(a.jsxs)(m.a,{className:"mr-auto",children:[Object(a.jsx)(m.a.Link,{id:"current-page",children:"Home"}),Object(a.jsx)(m.a.Link,{href:"/about",children:"About"})]}),Object(a.jsxs)(f.a,{inline:!0,id:"language-select",children:[Object(a.jsx)(f.a.Label,{children:"Results' language: "}),Object(a.jsxs)(f.a.Control,{as:"select",size:"sm",id:"languages",value:e.language,onChange:function(t){e.setLanguage(t.target.value),sessionStorage.setItem("language",t.target.value)},children:[Object(a.jsx)("option",{value:"it",children:"Italian"}),Object(a.jsx)("option",{value:"en",children:"English"})]})]})]})}var v=n(21),y=n(29);function S(e){var t=Object(c.useState)(e.endpointUrl),n=Object(j.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)({message:"",elementId:"",show:!1}),l=Object(j.a)(o,2),i=l[0],u=l[1];function d(e,t,n){u({message:e,elementId:t,show:!0}),setTimeout((function(){u({message:"",elementId:"",show:!1})}),n)}return Object(a.jsxs)(f.a,{onSubmit:function(t){if(t.preventDefault(),""===s)return alert("Non puoi lasciare questo campo vuoto!"),r(e.endpointUrl),void d("Previous endpoint restored.","reset-msg",5e3);s!==e.endpointUrl?(e.setEndpointUrl(s),d("Enpoint modified successfully!","success-msg",5e3),e.getEndpointTypes(s),sessionStorage.setItem("endpoint",s)):d("The endpoint you insert is the same of the previous","error-msg",5e3)},inline:!0,children:[Object(a.jsxs)(y.a,{children:[Object(a.jsx)(f.a.Label,{children:"Endpoint URL:"}),Object(a.jsx)(f.a.Control,{type:"text",name:"endpoint",placeholder:"Enter endpoint url",value:s,onChange:function(e){r(e.target.value)}}),Object(a.jsx)(y.a.Append,{children:Object(a.jsx)(v.a,{id:"primary-btn",variant:"outline-primary",type:"submit",children:"Apply"})})]}),i.show&&Object(a.jsx)("p",{id:i.elementId,children:i.message})]})}var C=n(43),k=n(38),w=n(28),I=n(34),L=n(41);function T(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),i=l[0],p=l[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),x=m[0],S=m[1],k=Object(c.useState)("rdfs:label"),T=Object(j.a)(k,2),N=T[0],E=T[1],R=Object(c.useState)([]),q=Object(j.a)(R,2),A=q[0],F=q[1],_=Object(c.useState)(),B=Object(j.a)(_,2),D=B[0],P=B[1],H={inline:!0,name:"searchType",type:"radio"};function J(){return(J=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setResourcesList([]),r(!0),a=b.a.CancelToken.source(),P(a),t.next=6,b.a.get("/autocomplete_search?query=".concat(n,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(i?i.type.value:""),{cancelToken:a.token}).then((function(e){console.log(e),console.log(e.data),F(e.data),P(null),r(!1)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),r(!1))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(c.useEffect)((function(){p(null)}),[e.endpointTypes]);var M=function(e){E(e.target.value)};function z(){return(z=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),"rdfs:label"!==N){t.next=10;break}return r(!0),F([]),a=b.a.CancelToken.source(),P(a),t.next=8,b.a.get("/search_by_label?query=".concat(x,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(i?i.type.value:""),{cancelToken:a.token}).then((function(t){console.log(t.data),e.setResourcesList(t.data),t.data===[]&&alert("Risorsa con il label inserito non trovata."),r(!1),F(void 0),P(null)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),r(!1))}));case 8:t.next=12;break;case 10:r(!0),window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&uri=").concat(x);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var G=A&&Object(a.jsx)("ul",{id:"autocomplete-ul",children:A.map((function(t,n){return Object(a.jsx)("li",{className:"autocomplete-li",onClick:function(){return window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&uri=").concat(t.resource.value)},children:Object(a.jsxs)("p",{children:[t.label.value,Object(a.jsx)("span",{children:t.resource.value})]})},n)}))});return Object(a.jsxs)(g.a,{fluid:!0,children:[Object(a.jsxs)(h.a,{className:"justify-content-center mb-2",children:[Object(a.jsx)("span",{style:{marginRight:"1em",textAlign:"center"},children:"Cerca per:"}),Object(a.jsx)(f.a.Check,Object(C.a)({label:"Label",value:"rdfs:label",checked:"rdfs:label"===N,id:"inline-radio-1",onChange:M},H)),Object(a.jsx)(f.a.Check,Object(C.a)({label:"URI",value:"URI",checked:"URI"===N,id:"inline-radio-2",onChange:M},H))]}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(w.a,{md:{span:2,offset:2},sm:12,children:[Object(a.jsxs)(I.a,{style:{float:" left "},children:[Object(a.jsx)(I.a.Toggle,{id:"dropdown-custom-components",children:null===i?"Any type of resource":i.label?i.label.value:i.type.value}),Object(a.jsx)(I.a.Menu,{as:U,children:e.endpointTypes.map((function(e,t){return Object(a.jsx)(I.a.Item,{onClick:function(){p(e),console.log(e)},children:e.label?e.label.value:e.type.value},t)}))})]}),e.endpointLoading&&Object(a.jsx)(L.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}),null!==i&&Object(a.jsx)(v.a,{id:"reset-type-btn",variant:"outline-danger",onClick:function(){return p(null)},children:"Reset"})]}),Object(a.jsxs)(w.a,{md:{span:4},xs:12,children:[Object(a.jsx)(f.a,{onSubmit:function(e){return z.apply(this,arguments)},children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(f.a.Control,{type:"text",name:"search",placeholder:"Type your search",autoComplete:"off",autoFocus:!0,onChange:function(e){D&&(console.log("CANCELLATO"),D.cancel("axios request cancelled"),P(null));var t=e.target.value;S(t),0===t.length?(F(null),r(!1)):"URI"!==N&&function(e){J.apply(this,arguments)}(e.target.value)},value:x}),Object(a.jsx)(y.a.Append,{children:Object(a.jsx)(v.a,{id:"primary-btn",variant:"outline-primary",type:"submit",children:"Search"})})]})}),G]}),Object(a.jsx)(w.a,{children:s&&Object(a.jsx)(L.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})}var U=s.a.forwardRef((function(e,t){var n=e.children,r=e.style,o=e.className,l=e["aria-labelledby"],i=Object(c.useState)(""),u=Object(j.a)(i,2),d=u[0],p=u[1];return Object(a.jsxs)("div",{ref:t,style:r,className:o,"aria-labelledby":l,children:[Object(a.jsx)(k.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return p(e.target.value)},value:d}),Object(a.jsx)("ul",{className:"list-unstyled",children:s.a.Children.toArray(n).filter((function(e){return!d||e.props.children.toLowerCase().includes(d)}))})]})}));function N(e){return Object(a.jsxs)(g.a,{id:"results-container",children:[Object(a.jsxs)("h3",{children:[e.resourcesList.length," Resources:"]}),e.resourcesList.map((function(t){return Object(a.jsxs)(g.a,{className:"results",onClick:function(){return window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&uri=").concat(t.resource.value)},children:[Object(a.jsx)("p",{className:"result-title",children:t.label.value}),Object(a.jsxs)("p",{className:"result-url",children:["URI: ",t.resource.value]}),Object(a.jsx)("p",{className:"result-comment",children:t.comment.value||"No comment avaiable for this resource"})]})}))]})}function E(){var e=Object(c.useState)(sessionStorage.getItem("language")||"it"),t=Object(j.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(sessionStorage.getItem("endpoint")||"http://dbpedia.org/sparql"),o=Object(j.a)(r,2),l=o[0],i=o[1],p=Object(c.useState)([]),O=Object(j.a)(p,2),m=O[0],f=O[1],v=Object(c.useState)(!1),y=Object(j.a)(v,2),C=y[0],k=y[1],w=Object(c.useState)([]),I=Object(j.a)(w,2),L=I[0],U=I[1];function E(e){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f([]),k(!0),e.next=4,b.a.get("/get_types?endpoint=".concat(t)).then((function(e){console.log(e.data),k(!1),f(e.data)})).catch((function(e){console.log("Errore nel caricamento dei tipi dell'endpoint:"+e),k(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=sessionStorage.getItem("language"),t=sessionStorage.getItem("endpoint");e?s(e):sessionStorage.setItem("language","it"),t?i(t):sessionStorage.setItem("endpoint","http://dbpedia.org/sparql"),console.log("RICHIESTA!"),E(t||"http://dbpedia.org/sparql")}),[]),Object(a.jsxs)(g.a,{fluid:!0,id:"main-container",children:[Object(a.jsx)(x,{language:n,setLanguage:s}),Object(a.jsx)(h.a,{id:"endpoint-form",children:Object(a.jsx)(S,{endpointUrl:l,setEndpointUrl:i,getEndpointTypes:E})}),Object(a.jsx)("hr",{}),Object(a.jsx)(T,{language:n,endpointUrl:l,endpointTypes:m,endpointLoading:C,setResourcesList:U}),L.length>0&&Object(a.jsx)(N,{resourcesList:L,language:n,endpointUrl:l})]})}o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(E,{})}),document.getElementById("root")),l()}},[[80,1,2]]]);
//# sourceMappingURL=main.7ff6e22e.chunk.js.map