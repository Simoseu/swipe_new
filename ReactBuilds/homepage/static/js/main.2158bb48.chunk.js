/*! For license information please see main.2158bb48.chunk.js.LICENSE.txt */
(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{75:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),s=n.n(c),r=n(17),l=n.n(r),o=n(18),i=n.n(o),u=n(31),d=n(9),j=n(23),p=n.n(j),b=(n(75),n(22)),h=n(33),g=n(41),O=n(39),m=n(12);function f(e){return Object(a.jsxs)(g.a,{variant:"dark",id:"navbar",children:[Object(a.jsx)(g.a.Brand,{href:"#home",children:"Swipe"}),Object(a.jsxs)(O.a,{className:"mr-auto",children:[Object(a.jsx)(O.a.Link,{href:"#home",children:"Home"}),Object(a.jsx)(O.a.Link,{href:"#about",children:"About"})]}),Object(a.jsxs)(m.a,{inline:!0,id:"language-select",children:[Object(a.jsx)(m.a.Label,{children:"Results' language: "}),Object(a.jsxs)(m.a.Control,{as:"select",size:"sm",id:"languages",value:e.language,onChange:function(t){e.setLanguage(t.target.value),sessionStorage.setItem("language",t.target.value)},children:[Object(a.jsx)("option",{value:"it",children:"Italian"}),Object(a.jsx)("option",{value:"en",children:"English"})]})]})]})}var x=n(21),v=n(29);function y(e){var t=Object(c.useState)(e.endpointUrl),n=Object(d.a)(t,2),s=n[0],r=n[1],l=Object(c.useState)({message:"",elementId:"",show:!1}),o=Object(d.a)(l,2),i=o[0],u=o[1];function j(e,t,n){u({message:e,elementId:t,show:!0}),setTimeout((function(){u({message:"",elementId:"",show:!1})}),n)}return Object(a.jsxs)(m.a,{onSubmit:function(t){if(t.preventDefault(),""===s)return alert("Non puoi lasciare questo campo vuoto!"),r(e.endpointUrl),void j("Previous endpoint restored.","reset-msg",5e3);s!==e.endpointUrl?(e.setEndpointUrl(s),j("Enpoint modified successfully!","success-msg",5e3),e.getEndpointTypes(s),sessionStorage.setItem("endpoint",s)):j("The endpoint you insert is the same of the previous","error-msg",5e3)},inline:!0,children:[Object(a.jsxs)(v.a,{children:[Object(a.jsx)(m.a.Label,{children:"Endpoint URL:"}),Object(a.jsx)(m.a.Control,{type:"text",name:"endpoint",placeholder:"Enter endpoint url",value:s,onChange:function(e){r(e.target.value)}}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(x.a,{id:"primary-btn",variant:"outline-primary",type:"submit",children:"Apply"})})]}),i.show&&Object(a.jsx)("p",{id:i.elementId,children:i.message})]})}var S=n(42),k=n(38),C=n(28),w=n(34),I=n(51);function T(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),s=n[0],r=n[1],l=Object(c.useState)(null),o=Object(d.a)(l,2),j=o[0],g=o[1],O=Object(c.useState)(""),f=Object(d.a)(O,2),y=f[0],k=f[1],T=Object(c.useState)("rdfs:label"),L=Object(d.a)(T,2),N=L[0],R=L[1],E=Object(c.useState)([]),q=Object(d.a)(E,2),A=q[0],_=q[1],B=Object(c.useState)(),D=Object(d.a)(B,2),F=D[0],H=D[1],J={inline:!0,name:"searchType",type:"radio"};function M(){return(M=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setResourcesList([]),r(!0),a=p.a.CancelToken.source(),H(a),t.next=6,p.a.get("/autocomplete_search?query=".concat(n,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(j?j.type.value:""),{cancelToken:a.token}).then((function(e){console.log(e),console.log(e.data),_(e.data),H(null),r(!1)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),r(!1))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(c.useEffect)((function(){g(null)}),[e.endpointTypes]);var z=function(e){R(e.target.value)};function P(){return(P=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),"rdfs:label"!==N){t.next=10;break}return r(!0),_([]),a=p.a.CancelToken.source(),H(a),t.next=8,p.a.get("/search_by_label?query=".concat(y,"&language=").concat(e.language,"&endpoint=").concat(e.endpointUrl,"&resourceType=").concat(j?j.type.value:""),{cancelToken:a.token}).then((function(t){console.log(t.data),e.setResourcesList(t.data),t.data===[]&&alert("Risorsa con il label inserito non trovata."),H(null)})).catch((function(e){"axios request cancelled"===e.message?console.log("Nuova richiesta ricevuta, questa viene cancellata."):(console.log("Errore nell'autocompletamento della ricerca",e),r(!1))}));case 8:t.next=11;break;case 10:window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&uri=").concat(y);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var G=A&&Object(a.jsx)("ul",{id:"autocomplete-ul",children:A.map((function(t,n){return Object(a.jsx)("li",{className:"autocomplete-li",onClick:function(){return window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&uri=").concat(t.resource.value)},children:Object(a.jsxs)("p",{children:[t.label.value[0],Object(a.jsx)("span",{children:t.resource.value})]})},n)}))});return Object(a.jsxs)(b.a,{fluid:!0,children:[Object(a.jsxs)(h.a,{className:"justify-content-center mb-2",children:[Object(a.jsx)("span",{style:{marginRight:"1em",textAlign:"center"},children:"Cerca per:"}),Object(a.jsx)(m.a.Check,Object(S.a)({label:"Label",value:"rdfs:label",checked:"rdfs:label"===N,id:"inline-radio-1",onChange:z},J)),Object(a.jsx)(m.a.Check,Object(S.a)({label:"URI",value:"URI",checked:"URI"===N,id:"inline-radio-2",onChange:z},J))]}),Object(a.jsxs)(h.a,{children:[Object(a.jsxs)(C.a,{md:{span:2,offset:2},sm:12,children:[Object(a.jsxs)(w.a,{style:{float:" left "},children:[Object(a.jsx)(w.a.Toggle,{id:"dropdown-custom-components",children:null===j?"Any type of resource":j.label?j.label.value:j.type.value}),Object(a.jsx)(w.a.Menu,{as:U,children:e.endpointTypes.map((function(e,t){return Object(a.jsx)(w.a.Item,{onClick:function(){g(e),console.log(e)},children:e.label?e.label.value:e.type.value},t)}))})]}),null!==j&&Object(a.jsx)(x.a,{id:"reset-type-btn",variant:"outline-danger",onClick:function(){return g(null)},children:"Reset"})]}),Object(a.jsxs)(C.a,{md:{span:4},xs:12,children:[Object(a.jsx)(m.a,{onSubmit:function(e){return P.apply(this,arguments)},children:Object(a.jsxs)(v.a,{children:[Object(a.jsx)(m.a.Control,{type:"text",name:"search",placeholder:"Type your search",autoComplete:"off",autoFocus:!0,onChange:function(e){F&&(console.log("CANCELLATO"),F.cancel("axios request cancelled"),H(null));var t=e.target.value;k(t),0===t.length?(_(null),r(!1)):"URI"!==N&&function(e){M.apply(this,arguments)}(e.target.value)},value:y}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(x.a,{id:"primary-btn",variant:"outline-primary",type:"submit",children:"Search"})})]})}),G]}),Object(a.jsx)(C.a,{children:s&&Object(a.jsx)(I.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})}var U=s.a.forwardRef((function(e,t){var n=e.children,r=e.style,l=e.className,o=e["aria-labelledby"],i=Object(c.useState)(""),u=Object(d.a)(i,2),j=u[0],p=u[1];return Object(a.jsxs)("div",{ref:t,style:r,className:l,"aria-labelledby":o,children:[Object(a.jsx)(k.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return p(e.target.value)},value:j}),Object(a.jsx)("ul",{className:"list-unstyled",children:s.a.Children.toArray(n).filter((function(e){return!j||e.props.children.toLowerCase().includes(j)}))})]})}));function L(e){return Object(a.jsxs)(b.a,{id:"results-container",children:[Object(a.jsxs)("h3",{children:[e.resourcesList.length," Resources:"]}),e.resourcesList.map((function(t){return Object(a.jsxs)(b.a,{className:"results",onClick:function(){return window.location.href="/resource?endpoint=".concat(e.endpointUrl,"&language=").concat(e.language,"&?uri=").concat(t.resource.value)},children:[Object(a.jsx)("p",{className:"result-title",children:t.label.value}),Object(a.jsxs)("p",{className:"result-url",children:["URI: ",t.resource.value]}),Object(a.jsx)("p",{className:"result-comment",children:t.comment.value||"No comment avaiable for this resource"})]})}))]})}var N=function(){var e=Object(c.useState)(sessionStorage.getItem("language")||"it"),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(sessionStorage.getItem("endpoint")||"http://dbpedia.org/sparql"),l=Object(d.a)(r,2),o=l[0],j=l[1],g=Object(c.useState)([]),O=Object(d.a)(g,2),m=O[0],x=O[1],v=Object(c.useState)([]),S=Object(d.a)(v,2),k=S[0],C=S[1];function w(e){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x([]),e.next=3,p.a.get("/get_types?endpoint=".concat(t)).then((function(e){console.log(e.data),x(e.data)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=sessionStorage.getItem("language"),t=sessionStorage.getItem("endpoint");e?s(e):sessionStorage.setItem("language","it"),t?j(t):sessionStorage.setItem("endpoint","http://dbpedia.org/sparql"),console.log("RICHIESTA!"),w(t||"http://dbpedia.org/sparql")}),[]),Object(a.jsxs)(b.a,{fluid:!0,id:"main-container",children:[Object(a.jsx)(f,{language:n,setLanguage:s}),Object(a.jsx)(h.a,{id:"endpoint-form",children:Object(a.jsx)(y,{endpointUrl:o,setEndpointUrl:j,getEndpointTypes:w})}),Object(a.jsx)("hr",{}),Object(a.jsx)(T,{language:n,endpointUrl:o,endpointTypes:m,setResourcesList:C}),k.length>0&&Object(a.jsx)(L,{resourcesList:k,language:n,endpointUrl:o})]})};l.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.2158bb48.chunk.js.map